"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();!function($){function t(t){return t.hasClass("is-active")}var e=function(){function t(e,i){_classCallCheck(this,t),this.$element=e,this.options=$.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(t,[{key:"_init",value:function e(){var t=this;if(this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=$('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var e=$(this),i=e.find("a"),a=e.hasClass("is-active"),n=i[0].hash.slice(1),s=i[0].id?i[0].id:n+"-label",o=$("#"+n);e.attr({role:"presentation"}),i.attr({role:"tab","aria-controls":n,"aria-selected":a,id:s}),o.attr({role:"tabpanel","aria-hidden":!a,"aria-labelledby":s}),a&&t.options.autoFocus&&i.focus()}),this.options.matchHeight){var e=this.$tabContent.find("img");e.length?Foundation.onImagesLoaded(e,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function i(){this._addKeyHandler(),this._addClickHandler(),this.options.matchHeight&&$(window).on("changed.zf.mediaquery",this._setHeight.bind(this))}},{key:"_addClickHandler",value:function a(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("is-active")||t._handleTabChange($(this))})}},{key:"_addKeyHandler",value:function n(){var t=this,e=t.$element.find("li:first-of-type"),i=t.$element.find("li:last-of-type");this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(e){if(9!==e.which){e.stopPropagation(),e.preventDefault();var i=$(this),a=i.parent("ul").children("li"),n,s;a.each(function(e){return $(this).is(i)?void(t.options.wrapOnKeys?(n=0===e?a.last():a.eq(e-1),s=e===a.length-1?a.first():a.eq(e+1)):(n=a.eq(Math.max(0,e-1)),s=a.eq(Math.min(e+1,a.length-1)))):void 0}),Foundation.Keyboard.handleKey(e,"Tabs",{open:function(){i.find('[role="tab"]').focus(),t._handleTabChange(i)},previous:function(){n.find('[role="tab"]').focus(),t._handleTabChange(n)},next:function(){s.find('[role="tab"]').focus(),t._handleTabChange(s)}})}})}},{key:"_handleTabChange",value:function s(t){var e=t.find('[role="tab"]'),i=e[0].hash,a=this.$tabContent.find(i),n=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"});$("#"+n.attr("aria-controls")).removeClass("is-active").attr({"aria-hidden":"true"}),t.addClass("is-active"),e.attr({"aria-selected":"true"}),a.addClass("is-active").attr({"aria-hidden":"false"}),this.$element.trigger("change.zf.tabs",[t])}},{key:"selectTab",value:function o(t){var e;e="object"==typeof t?t[0].id:t,e.indexOf("#")<0&&(e="#"+e);var i=this.$tabTitles.find('[href="'+e+'"]').parent("."+this.options.linkClass);this._handleTabChange(i)}},{key:"_setHeight",value:function l(){var t=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var e=$(this),i=e.hasClass("is-active");i||e.css({visibility:"hidden",display:"block"});var a=this.getBoundingClientRect().height;i||e.css({visibility:"",display:""}),t=a>t?a:t}).css("height",t+"px")}},{key:"destroy",value:function h(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&$(window).off("changed.zf.mediaquery"),Foundation.unregisterPlugin(this)}}]),t}();e.defaults={autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,linkClass:"tabs-title",panelClass:"tabs-panel"},Foundation.plugin(e,"Tabs")}(jQuery);